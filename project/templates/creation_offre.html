{% extends "base.html" %}

{% block styles %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='edit.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='retour_admin.css') }}">
{% endblock %}

{% block content %}
<div class="mt-4 w-auto retour_admin">
    <a class="btn btn-dark" href="{{ url_for('admin') }}">
        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"/>
      </svg>
    </a>
</div>
<div class="top-info">
    <h1 class="text-center my-3">Création des formules</h1>
    <hr class="w-25 mx-auto bg-dark bar"/>
</div>

<div class="container-fluid w-75 bg-light justify-content-center align-items-center">
    <form method="POST" novalidate class="form-horizontal" enctype="multipart/form-data" role="form" action="{{ url_for('add_offre') }}">
        {{ form.hidden_tag() }} <!-- CSRF Token -->
        <div class="form-group">
            <label class="mt-3" for="name">Nom de la formule :</label>
            {{ form.libelle_formule(class="form-control", id="name", placeholder="Entrez le nom de la formule") }}
        </div>
        <div class="form-group">
            <label class="mt-3" for="price">Prix :</label>
            {{ form.prix(class="form-control", id="price", placeholder="Entrez le prix en euros") }}
        </div>
        <div class="form-group">
            <div class="form-group">
                <label class="mt-3 mb-3" for="plats">Sélectionnez les plats :</label>
                <div class="row">
                    <!-- Section Plats chauds -->
                    <div class="col-md-6">
                        <h5>Plats chauds</h5>
                        {% for plat in plats if plat.type_plat == "Plat chaud" %}
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="plats" id="plat_{{ plat.nom_plat }}" value="{{ plat.nom_plat }}">
                            <label class="form-check-label" for="plat_{{ plat.nom_plat }}">
                                {{ plat.nom_plat }} - {{ plat.prix }}€
                            </label>
                        </div>
                        {% endfor %}
                    </div>
            
                    <!-- Section Plats froids -->
                    <div class="col-md-6">
                        <h5>Plats froids</h5>
                        {% for plat in plats if plat.type_plat == "Plat froid" %}
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="plats" id="plat_{{ plat.nom_plat }}" value="{{ plat.nom_plat }}">
                            <label class="form-check-label" for="plat_{{ plat.nom_plat }}">
                                {{ plat.nom_plat }} - {{ plat.prix }}€
                            </label>
                        </div>
                        {% endfor %}
                    </div>
            
                    <!-- Section Sushis -->
                    <div class="col-md-6">
                        <h5>Sushis</h5>
                        {% for plat in plats if plat.type_plat == "Sushi" %}
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="plats" id="plat_{{ plat.nom_plat }}" value="{{ plat.nom_plat }}">
                            <label class="form-check-label" for="plat_{{ plat.nom_plat }}">
                                {{ plat.nom_plat }} - {{ plat.prix }}€
                            </label>
                        </div>
                        {% endfor %}
                    </div>
            
                    <!-- Section Desserts -->
                    <div class="col-md-6">
                        <h5>Desserts</h5>
                        {% for plat in plats if plat.type_plat == "Dessert" %}
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="plats" id="plat_{{ plat.nom_plat }}" value="{{ plat.nom_plat }}">
                            <label class="form-check-label" for="plat_{{ plat.nom_plat }}">
                                {{ plat.nom_plat }} - {{ plat.prix }}€
                            </label>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <small class="form-text text-muted">Vous pouvez sélectionner jusqu'à 4 plats.</small>
            </div>
        </div>
        
        <button type="submit" class="btn btn-orange mt-3">Créer la formule</button>

    </form>
</div>
{% endblock %}
